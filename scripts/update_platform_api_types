#!/usr/bin/env bash

curl https://api.heroku.com/schema -H "Accept: application/vnd.heroku+json; version=$1" > schema_v$1.json
cat schema_v$1.json | node_modules/.bin/json2ts --style.singleQuote --no-style.semi --bannerComment="/* This file was automatically generated by json-schema-to-typescript. DO NOT MODIFY IT BY HAND. */" > lib/index.d.ts
sed -E -i -r "s/Heroku(Platform|Build|Setup|Vault)API/Platform/" lib/index.d.ts
yarn eslint --fix lib/index.d.ts
